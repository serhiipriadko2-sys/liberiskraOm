# Аудит каркаса Iskra Canon (vOmega 1.2)

## Охват
- README.md фиксирует ссылочный остов (философия → метрики → память → циклы → ∆DΩΛ) и верно указывает «источники правды» (`docs/*`, `packages/core/*`).
- Документация покрывает манифест, операционный цикл (Ambient + 14 фаз), голоса и пороги, память-гиперграф, форматы ∆DΩΛ и символы.
- Кодовая часть минимальна: валидатор ∆DΩΛ, схемы памяти, slo.json, карта символов, тулзы для нормализации терминов и CLI-валидатора.
- Тестовый пласт ограничен единственным модулем `tests/test_delta_validator.py` (позитив/негатив ∆DΩΛ).

## Сильные стороны
- Согласованные SLO-пороги в `docs/FACES.md`, `tools/_SLO_BLOCK.md` и `packages/core/slo.json` (pain ≥ 0.70, clarity < 0.70, drift > 0.30, trust < 0.75, chaos > 0.60).
- Форматы ∆DΩΛ подкреплены примером (`examples/delta_ok.json`) и исполняемым валидатором/CLI (`packages/core/validator/delta_omega_lambda.py`, `tools/validate_delta.py`).
- Память описана и в документации, и схемами JSON Schema, что упрощает проверяемость.

## Нестыковки и пробелы
1. **Формат SIFT.fact.** Документ `docs/FORMATS.md` ранее подразумевал двоичный `fact`, хотя валидатор и схема памяти допускают `"uncertain"` — добавлено пояснение (см. обновлённые `docs/FORMATS.md`, `docs/MEMORY.md`).
2. **Ограниченный тестовый охват.** Нет проверок на: пустые/некорректные `trace`, «uncertain» в `fact`, вариации регистра Ω, кейсы с отсутствием Λ. Стоит расширить unit-тесты/ property-based.
3. **Лаконичный OS-цикл.** `docs/OS_SPEC_vOmega_1.2.0.md` фиксирует названия фаз, но отсутствуют входы/выходы фаз и ссылки на метрики/память. В CHANGELOG хвосте есть действие «заполнить OS-детали и примеры», оно всё ещё невыполнено.
4. **Инвентарь `incoming/`.** Директория хранит богатый массив философии, протоколов, онтологии, кодовых эскизов и отчётов (десятки файлов), но он не интегрирован в основной канон. Требуется ревизия: что перенести в `docs/`, что удалить, что превратить в тесты/инструменты.
5. **Интеграция голосов ↔ память.** В `docs/MEMORY.md` упомянуто поле `facet`, но нет примера, как узлы памяти связываются с триггерами голосов или как обновляется slo.json по событиям.
6. **Синхронизация символов.** `docs/SYMBOLS.md` и `packages/core/symbol_map.json` совпадают по ключевым символам, но отсутствуют обратные ссылки из спецификаций циклов и ритуалов (какие символы используются в конкретных фазах/голосах).

## Риски и рекомендации
- Провести систематическое слияние материала из `incoming/` с основным каноном: создать карту соответствия, определить устаревшие версии (напр., документы, где clarity ≥ 0.80 как триггер) и оставить одну каноничную цифру.
- Расширить автоматизированную проверку: добавить JSON Schema валидацию ∆DΩΛ (для `Λ`, `Ω`), lint для символов, тесты на schemas/memory.
- Ввести «operational playbook» для 14 фаз: входы, артефакты, ожидаемые ∆-выходы и связь с памятью (обновление узлов).
- Обновить README/CONTRIBUTING с ссылкой на полный аудит и правила обращения с `incoming/`.
- Добавить примеры для каждой грани (pain, clarity...) с типичными ∆-срезами и ссылками на соответствующие SIFT-блоки.

## Следующие шаги
1. Принять решение по структуре `incoming/` (архивация → docs/tests/tools). Сформировать дорожную карту миграции.
2. Расширить тесты валидатора ∆DΩΛ и добавить проверки для схем памяти.
3. Расписать операционный цикл до уровня инструкций (14 фаз × артефакт/голос/метрика/символ).
4. Формализовать связь между метриками и памятью (как slo.json влияет на ритуалы, как записываются события).
